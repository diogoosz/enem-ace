
{
  "entities": {
    "User": {
      "title": "User",
      "type": "object",
      "description": "Represents a user of the ENEM Ace application.",
      "properties": {
        "name": {
          "type": "string",
          "description": "User's full name."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "stripeId": {
          "type": "string",
          "description": "The user's Stripe Customer ID."
        },
        "subscriptionName": {
          "type": "string",
          "description": "The name of the user's active plan (e.g., Basico, Premium)."
        },
        "status": {
          "type": "string",
          "description": "The status of the user's subscription (e.g., active, trialing, canceled)."
        }
      },
      "required": [
        "name",
        "email"
      ]
    },
    "Subscription": {
      "title": "Subscription",
      "type": "object",
      "description": "Represents a subscription plan.",
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the subscription plan (e.g., Basico, Intermediario, Premium)."
        },
        "price": {
          "type": "number",
          "description": "Price of the subscription plan."
        },
        "features": {
          "type": "array",
          "description": "A list of features included in the subscription plan.",
          "items": {
            "type": "string"
          }
        },
        "blockedFeatures": {
          "type": "array",
          "description": "A list of features blocked in the subscription plan.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "name",
        "price",
        "features"
      ]
    },
    "UserQuestion": {
      "title": "UserQuestion",
      "type": "object",
      "description": "Represents a user's interaction with a specific question.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "Reference to User."
        },
        "questionId": {
          "type": "string",
          "description": "Reference to Question."
        },
        "userAnswer": {
          "type": "string",
          "description": "The answer given by the user."
        },
        "isCorrect": {
          "type": "boolean",
          "description": "Indicates whether the user's answer was correct."
        },
        "answeredAt": {
          "type": "string",
          "description": "Timestamp of when the question was answered.",
          "format": "date-time"
        }
      },
      "required": [
        "userId",
        "questionId",
        "userAnswer",
        "isCorrect",
        "answeredAt"
      ]
    },
    "Essay": {
      "title": "Essay",
      "type": "object",
      "description": "Represents an essay written by a user.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "Reference to User."
        },
        "topic": {
          "type": "string",
          "description": "The topic of the essay."
        },
        "content": {
          "type": "string",
          "description": "The content of the essay."
        },
        "competency1": {
          "type": "number",
          "description": "Score for Competency 1 (norma culta)."
        },
        "competency2": {
          "type": "number",
          "description": "Score for Competency 2 (compreensão do tema)."
        },
        "competency3": {
          "type": "number",
          "description": "Score for Competency 3 (argumentação)."
        },
        "competency4": {
          "type": "number",
          "description": "Score for Competency 4 (coesão e coerência)."
        },
        "competency5": {
          "type": "number",
          "description": "Score for Competency 5 (proposta de intervenção)."
        },
        "feedback": {
          "type": "string",
          "description": "Feedback from the AI on the essay."
        },
        "submittedAt": {
          "type": "string",
          "description": "Timestamp of when the essay was submitted.",
          "format": "date-time"
        }
      },
      "required": [
        "userId",
        "topic",
        "content"
      ]
    },
    "GeneratedQuestion": {
      "title": "GeneratedQuestion",
      "type": "object",
      "description": "Represents an extra question generated by the IA.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "Reference to User."
        },
        "subject": {
          "type": "string",
          "description": "Subject of the question (e.g., Matemática, Física, Química)."
        },
        "difficulty": {
          "type": "string",
          "description": "Difficulty level of the question (e.g., Fácil, Médio, Difícil)."
        },
        "content": {
          "type": "string",
          "description": "The question text."
        },
        "alternatives": {
          "type": "array",
          "description": "The alternatives to the question",
          "items": {
            "type": "string"
          }
        },
        "correctAnswer": {
          "type": "string",
          "description": "The correct answer to the question."
        },
        "explanation": {
          "type": "string",
          "description": "Explanation of the correct answer."
        },
        "generatedAt": {
          "type": "string",
          "description": "Timestamp of when the question was generated.",
          "format": "date-time"
        }
      },
      "required": [
        "userId",
        "subject",
        "difficulty",
        "content",
        "alternatives",
        "correctAnswer",
        "explanation",
        "generatedAt"
      ]
    }
  },
  "auth": {
    "providers": [
      "password"
    ]
  },
  "firestore": {
    "collections": [
      {
        "path": "/customers/{userId}",
        "schema": {
          "$ref": "#/entities/User"
        },
        "description": "Stores user profile information and links to Stripe customer data."
      },
      {
        "path": "/products",
        "schema": {
          "$ref": "#/entities/Subscription"
        },
        "description": "Stores details about the available subscription plans."
      },
      {
        "path": "/customers/{userId}/userQuestions",
        "schema": {
          "$ref": "#/entities/UserQuestion"
        },
        "description": "Stores user's interaction with a specific question."
      },
      {
        "path": "/customers/{userId}/essays",
        "schema": {
          "$ref": "#/entities/Essay"
        },
        "description": "Stores essays written by a user."
      },
      {
        "path": "/customers/{userId}/generatedQuestions",
        "schema": {
          "$ref": "#/entities/GeneratedQuestion"
        },
        "description": "Stores extra question generated by the IA for the user."
      }
    ]
  }
}
